<!DOCTYPE html>
<html>
<head>
    <title>Download Handler</title>
</head>
<body>
    <script>
        // Listen for messages from the background script
        chrome.runtime.onMessage.addListener((message, sender, sendResponse) => {
            if (message.type === 'DOWNLOAD_DATA') {
                const { content, fileName } = message.data;
                
                // Create a Blob and download URL
                const blob = new Blob([content], { type: 'text/plain' });
                const url = URL.createObjectURL(blob);
                
                // Create and click a download link
                const a = document.createElement('a');
                a.href = url;
                a.download = fileName;
                document.body.appendChild(a);
                a.click();
                
                // Clean up
                document.body.removeChild(a);
                URL.revokeObjectURL(url);
                
                sendResponse({ success: true });
            }
            return true;
        });
    </script>
</body>
</html> 